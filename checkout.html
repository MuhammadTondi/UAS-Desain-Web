<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Nereus Interior</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="index.html" class="logo">Nereus Interior</a>
                <ul class="nav-links">
                    <li><a href="index.html" data-i18n="nav.home">Home</a></li>
                    <li><a href="shop.html" data-i18n="nav.shop">Shop</a></li>
                    <li><a href="about.html" data-i18n="nav.about">About</a></li>
                    <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
                </ul>
                <div class="nav-right">
                    <div class="search-icon">
                        <a href="#" title="Search">
                            <i class="fas fa-search"></i>
                        </a>
                    </div>
                    <div class="cart-icon">
                        <a href="cart.html">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </a>
                    </div>
                    <div class="profile-icon">
                        <a href="profile.html">
                            <i class="fas fa-user"></i>
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <h1 data-i18n="checkout.title">Checkout</h1>
            
            <div class="checkout-container">
                <div class="checkout-form">
                    <form id="checkout-form" onsubmit="handleCheckout(event)">
                        <!-- Shipping Information -->
                        <section class="form-section">
                            <h2 data-i18n="checkout.shipping.title">Shipping Information</h2>
                            <div class="form-group">
                                <label for="fullName" data-i18n="checkout.shipping.fullName">Full Name</label>
                                <input type="text" id="fullName" name="fullName" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="email" data-i18n="checkout.shipping.email">Email Address</label>
                                <input type="email" id="email" name="email" class="form-control" required 
                                       pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                                       title="Please enter a valid email address">
                            </div>
                            <div class="form-group">
                                <label for="phone" data-i18n="checkout.shipping.phone">Phone Number</label>
                                <input type="tel" id="phone" name="phone" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="address" data-i18n="checkout.shipping.address">Address</label>
                                <textarea id="address" name="address" class="form-control" required></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="city" data-i18n="checkout.shipping.city">City</label>
                                    <input type="text" id="city" name="city" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="postalCode" data-i18n="checkout.shipping.postalCode">Postal Code</label>
                                    <input type="text" id="postalCode" name="postalCode" class="form-control" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="country" data-i18n="checkout.shipping.country">Country</label>
                                <select id="country" class="form-control" required>
                                    <option value="ID">Indonesia</option>
                                </select>
                            </div>
                        </section>

                        <!-- Payment Information -->
                        <section class="form-section">
                            <h2 data-i18n="checkout.payment.title">Payment Information</h2>
                            <div class="form-group">
                                <label data-i18n="checkout.payment.method">Payment Method</label>
                                <div class="payment-methods">
                                    <div class="payment-method">
                                        <input type="radio" id="cod" name="paymentMethod" value="cod" checked>
                                        <label for="cod">
                                            <i class="fas fa-money-bill-wave"></i>
                                            <div class="payment-info">
                                                <span class="payment-title">Cash on Delivery (COD)</span>
                                                <span class="payment-description">Pay with cash when your order arrives</span>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="payment-method">
                                        <input type="radio" id="va" name="paymentMethod" value="va">
                                        <label for="va">
                                            <i class="fas fa-university"></i>
                                            <div class="payment-info">
                                                <span class="payment-title">Virtual Account</span>
                                                <span class="payment-description">Pay through bank transfer using Virtual Account</span>
                                            </div>
                                        </label>
                                    </div>
                                    <div class="payment-method">
                                        <input type="radio" id="card" name="paymentMethod" value="card">
                                        <label for="card">
                                            <i class="fas fa-credit-card"></i>
                                            <div class="payment-info">
                                                <span class="payment-title">Debit/Credit Card</span>
                                                <span class="payment-description">Pay securely with your card</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Virtual Account Details -->
                            <div id="va-details" class="payment-details" style="display: none;">
                                <div class="payment-instructions">
                                    <h3>Payment Instructions</h3>
                                    <ol>
                                        <li>Select your preferred bank below</li>
                                        <li>Use the generated Virtual Account number to make your payment</li>
                                        <li>Complete the payment within 24 hours</li>
                                        <li>Your order will be processed after payment confirmation</li>
                                    </ol>
                                </div>
                                <div class="form-group">
                                    <label for="bank" data-i18n="checkout.payment.bank">Select Bank</label>
                                    <select id="bank" class="form-control">
                                        <option value="bca">Bank Central Asia (BCA)</option>
                                        <option value="mandiri">Bank Mandiri</option>
                                        <option value="bni">Bank Negara Indonesia (BNI)</option>
                                        <option value="bri">Bank Rakyat Indonesia (BRI)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="vaNumber" data-i18n="checkout.payment.vaNumber">Virtual Account Number</label>
                                    <div class="va-number-container">
                                        <input type="text" id="vaNumber" class="form-control" readonly>
                                        <button type="button" class="btn-copy" onclick="copyVANumber()">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <small class="form-text">Please copy this number to make your payment</small>
                                </div>
                            </div>

                            <!-- Card Details -->
                            <div id="card-details" class="payment-details" style="display: none;">
                                <div class="payment-instructions">
                                    <h3>Secure Payment</h3>
                                    <p>Your payment information is encrypted and secure. We accept all major credit and debit cards.</p>
                                </div>
                                <div class="form-group">
                                    <label for="cardNumber" data-i18n="checkout.payment.cardNumber">Card Number</label>
                                    <input type="text" id="cardNumber" class="form-control" 
                                           pattern="[0-9]{16}" maxlength="16" placeholder="1234 5678 9012 3456">
                                    <small class="form-text">Enter your 16-digit card number</small>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="expiryDate" data-i18n="checkout.payment.expiryDate">Expiry Date</label>
                                        <input type="text" id="expiryDate" class="form-control" 
                                               pattern="(0[1-9]|1[0-2])\/([0-9]{2})" placeholder="MM/YY">
                                        <small class="form-text">Format: MM/YY</small>
                                    </div>
                                    <div class="form-group">
                                        <label for="cvv" data-i18n="checkout.payment.cvv">CVV</label>
                                        <input type="text" id="cvv" class="form-control" 
                                               pattern="[0-9]{3,4}" maxlength="4" placeholder="123">
                                        <small class="form-text">3 or 4 digits on the back of your card</small>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <button type="submit" class="btn" data-i18n="checkout.payment.placeOrder">Place Order</button>
                    </form>
                </div>

                <div class="order-summary">
                    <h2>Order Summary</h2>
                    <div id="order-items">
                        <!-- Order items will be dynamically loaded here -->
                    </div>
                    <div class="order-totals">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">${formatPrice(0)}</span>
                        </div>
                        <div class="total-row grand-total">
                            <span>Total:</span>
                            <span id="total">${formatPrice(0)}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 data-i18n="footer.quickLinks">Quick Links</h3>
                    <ul>
                        <li><a href="index.html" data-i18n="nav.home">Home</a></li>
                        <li><a href="shop.html" data-i18n="nav.shop">Shop</a></li>
                        <li><a href="about.html" data-i18n="nav.about">About</a></li>
                        <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3 data-i18n="footer.contactUs">Contact Us</h3>
                    <p>Email: mhdtondialkafiitarigan@gmail.com</p>
                    <p>Phone: 0823-0001-0002</p>
                    <p>Address: Medan Helvetia, Kota Medan, Indonesia</p>
                </div>
                <div class="footer-section">
                    <h3 data-i18n="footer.followUs">Follow Us</h3>
                    <div class="social-icons">
                        <a href="https://instagram.com/alkfiitrg" target="_blank"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-i18n="footer.copyright">&copy; 2025 Nereus Interior by Tondi. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/script.js"></script>
    <script src="js/translations.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const checkoutForm = document.getElementById('checkout-form');
            const orderItems = document.getElementById('order-items');
            const subtotalElement = document.getElementById('subtotal');
            const totalElement = document.getElementById('total');
            const paymentMethods = document.querySelectorAll('input[name="paymentMethod"]');
            const vaDetails = document.getElementById('va-details');
            const cardDetails = document.getElementById('card-details');
            const vaNumber = document.getElementById('vaNumber');

            // Check for dark mode preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode');
            }

            // Listen for dark mode changes
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (e.matches) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            });

            // Handle payment method selection
            paymentMethods.forEach(method => {
                method.addEventListener('change', (e) => {
                    const selectedMethod = e.target.value;
                    
                    // Hide all payment details first
                    vaDetails.style.display = 'none';
                    cardDetails.style.display = 'none';
                    
                    // Show relevant payment details
                    if (selectedMethod === 'va') {
                        vaDetails.style.display = 'block';
                        generateVANumber();
                    } else if (selectedMethod === 'card') {
                        cardDetails.style.display = 'block';
                    }
                });
            });

            // Generate random VA number
            function generateVANumber() {
                const bank = document.getElementById('bank').value;
                const randomNum = Math.floor(Math.random() * 1000000000000).toString().padStart(12, '0');
                let prefix = '';
                
                switch(bank) {
                    case 'bca':
                        prefix = '390';
                        break;
                    case 'mandiri':
                        prefix = '888';
                        break;
                    case 'bni':
                        prefix = '881';
                        break;
                    case 'bri':
                        prefix = '002';
                        break;
                }
                
                vaNumber.value = prefix + randomNum;
            }

            // Update VA number when bank changes
            document.getElementById('bank').addEventListener('change', generateVANumber);

            // Format card number input
            const cardNumber = document.getElementById('cardNumber');
            cardNumber.addEventListener('input', (e) => {
                e.target.value = e.target.value.replace(/\D/g, '');
            });

            // Format expiry date input
            const expiryDate = document.getElementById('expiryDate');
            expiryDate.addEventListener('input', (e) => {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 2) {
                    value = value.slice(0, 2) + '/' + value.slice(2);
                }
                e.target.value = value;
            });

            // Format CVV input
            const cvv = document.getElementById('cvv');
            cvv.addEventListener('input', (e) => {
                e.target.value = e.target.value.replace(/\D/g, '');
            });

            // Render order summary
            function renderOrderSummary() {
                const subtotal = calculateTotal();
                const shipping = 29.99;
                const total = subtotal + shipping;

                orderItems.innerHTML = cart.map(item => `
                    <div class="order-item">
                        <img src="${item.image}" alt="${item.name}">
                        <div class="item-details">
                            <h4>${item.name}</h4>
                            <p>Quantity: ${item.quantity}</p>
                            <p>${formatPrice(item.price * item.quantity)}</p>
                        </div>
                    </div>
                `).join('');

                subtotalElement.textContent = `${formatPrice(subtotal)}`;
                totalElement.textContent = `${formatPrice(total)}`;
            }

            // Handle form submission
            function handleCheckout(event) {
                event.preventDefault();
                
                // Get form data
                const formData = new FormData(event.target);
                const orderData = Object.fromEntries(formData.entries());
                
                // Process the order
                processOrder(orderData);
            }

            // Copy VA Number function
            function copyVANumber() {
                const vaNumber = document.getElementById('vaNumber');
                vaNumber.select();
                document.execCommand('copy');
                showNotification('Virtual Account number copied to clipboard!');
            }

            // Initial render
            renderOrderSummary();
        });
    </script>
</body>
</html> 